(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{zrcO:function(e,r,t){"use strict";t.r(r),t.d(r,"UsersModule",(function(){return D}));var s=t("3Pt+"),i=t("ofXK"),n=t("tyNb"),o=t("fXoL");let c=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,r){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Pb(2,"router-outlet"),o.Sb(),o.Sb())},directives:[n.g],encapsulation:2}),e})();var a=t("SxV6"),b=t("J9tS");function d(e,r){1&e&&o.Pb(0,"span",10)}function u(e,r){1&e&&(o.Tb(0,"span"),o.Hc(1,"Delete"),o.Sb())}function f(e,r){if(1&e){const e=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td"),o.Hc(2),o.Sb(),o.Tb(3,"td"),o.Hc(4),o.Sb(),o.Tb(5,"td"),o.Hc(6),o.Sb(),o.Tb(7,"td"),o.Hc(8),o.Sb(),o.Tb(9,"td"),o.Hc(10),o.Sb(),o.Tb(11,"td",6),o.Tb(12,"a",7),o.Hc(13,"Edit"),o.Sb(),o.Tb(14,"button",8),o.fc("click",(function(){o.yc(e);const t=r.$implicit;return o.jc().deleteUser(t.id)})),o.Fc(15,d,1,0,"span",9),o.Fc(16,u,2,0,"span",5),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=r.$implicit;o.Bb(2),o.Ic(e.email),o.Bb(2),o.Ic(e.firstName),o.Bb(2),o.Ic(e.lastName),o.Bb(2),o.Ic(e.username),o.Bb(2),o.Ic(e.admin),o.Bb(2),o.qc("routerLink","edit/",e.id,""),o.Bb(2),o.oc("disabled",e.isDeleting),o.Bb(1),o.oc("ngIf",e.isDeleting),o.Bb(1),o.oc("ngIf",!e.isDeleting)}}function l(e,r){1&e&&(o.Tb(0,"tr"),o.Tb(1,"td",11),o.Pb(2,"span",12),o.Sb(),o.Sb())}let m=(()=>{class e{constructor(e){this.accountService=e,this.users=null}ngOnInit(){this.accountService.getAll().pipe(Object(a.a)()).subscribe(e=>this.users=e)}deleteUser(e){this.users.find(r=>r.id===e).isDeleting=!0,this.accountService.delete(e).pipe(Object(a.a)()).subscribe(()=>{this.users=this.users.filter(r=>r.id!==e)})}}return e.\u0275fac=function(r){return new(r||e)(o.Ob(b.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["ng-component"]],decls:21,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,r){1&e&&(o.Tb(0,"h1"),o.Hc(1,"Users"),o.Sb(),o.Tb(2,"a",0),o.Hc(3,"Add User"),o.Sb(),o.Tb(4,"table",1),o.Tb(5,"thead"),o.Tb(6,"tr"),o.Tb(7,"th",2),o.Hc(8,"E-Mail ID"),o.Sb(),o.Tb(9,"th",2),o.Hc(10,"First Name"),o.Sb(),o.Tb(11,"th",2),o.Hc(12,"Last Name"),o.Sb(),o.Tb(13,"th",2),o.Hc(14,"Username"),o.Sb(),o.Tb(15,"th",2),o.Hc(16,"Admin"),o.Sb(),o.Pb(17,"th",3),o.Sb(),o.Sb(),o.Tb(18,"tbody"),o.Fc(19,f,17,9,"tr",4),o.Fc(20,l,3,0,"tr",5),o.Sb(),o.Sb()),2&e&&(o.Bb(19),o.oc("ngForOf",r.users),o.Bb(1),o.oc("ngIf",!r.users))},directives:[n.e,i.j,i.k],encapsulation:2}),e})();var p=t("mqOx");function h(e,r){1&e&&(o.Tb(0,"h1"),o.Hc(1,"Add User"),o.Sb())}function g(e,r){1&e&&(o.Tb(0,"h1"),o.Hc(1,"Edit User"),o.Sb())}function v(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"E-Mail ID is required"),o.Sb())}function S(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Please Enter a Valid Email ID"),o.Sb())}function T(e,r){if(1&e&&(o.Tb(0,"div",20),o.Fc(1,v,2,0,"div",1),o.Fc(2,S,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.email.errors.required),o.Bb(1),o.oc("ngIf",e.f.email.errors.email)}}function I(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"First Name is required"),o.Sb())}function w(e,r){if(1&e&&(o.Tb(0,"div",20),o.Fc(1,I,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.firstName.errors.required)}}function B(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Last Name is required"),o.Sb())}function N(e,r){if(1&e&&(o.Tb(0,"div",20),o.Fc(1,B,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.lastName.errors.required)}}function F(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Username is required"),o.Sb())}function H(e,r){if(1&e&&(o.Tb(0,"div",20),o.Fc(1,F,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.username.errors.required)}}function C(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Password is required"),o.Sb())}function y(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Password must be at least 6 characters"),o.Sb())}function P(e,r){if(1&e&&(o.Tb(0,"div",20),o.Fc(1,C,2,0,"div",1),o.Fc(2,y,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.password.errors.required),o.Bb(1),o.oc("ngIf",e.f.password.errors.minlength)}}function q(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Password is required."),o.Sb())}function k(e,r){1&e&&(o.Tb(0,"div"),o.Hc(1,"Password and Confirm Password must be match."),o.Sb())}function O(e,r){if(1&e&&(o.Tb(0,"div",21),o.Fc(1,q,2,0,"div",1),o.Fc(2,k,2,0,"div",1),o.Sb()),2&e){const e=o.jc();o.Bb(1),o.oc("ngIf",e.f.confirm_password.errors.required),o.Bb(1),o.oc("ngIf",e.f.confirm_password.errors.confirmedValidator)}}function j(e,r){1&e&&o.Pb(0,"span",22)}const U=function(e){return{"is-invalid":e}};let A=(()=>{class e{constructor(e,r,t,s,i){this.formBuilder=e,this.route=r,this.router=t,this.accountService=s,this.alertService=i,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[s.p.minLength(6)];this.isAddMode&&e.push(s.p.required),this.form=this.formBuilder.group({email:["",s.p.required,s.p.email],firstName:["",s.p.required],lastName:["",s.p.required],username:["",s.p.required],password:["",e],confirm_password:["",[s.p.required]],admin:[!1]},{validator:Object(p.a)("password","confirm_password")}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(a.a)()).subscribe(e=>{this.f.firstName.setValue(e.firstName),this.f.lastName.setValue(e.lastName),this.f.username.setValue(e.username),this.f.admin.setValue(e.admin),this.f.email.setValue(e.email)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe(Object(a.a)()).subscribe(e=>{this.alertService.success("User added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}updateUser(){this.accountService.update(this.id,this.form.value).pipe(Object(a.a)()).subscribe(e=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return e.\u0275fac=function(r){return new(r||e)(o.Ob(s.c),o.Ob(n.a),o.Ob(n.c),o.Ob(b.a),o.Ob(b.b))},e.\u0275cmp=o.Ib({type:e,selectors:[["ng-component"]],decls:33,vars:26,consts:[[1,"col-md-5","offset-md-3","mt-5"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","placeholder","E-mail ID",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"form-row","form-group"],[1,"form-group","md-col-6","ml-3"],["type","text","formControlName","firstName","placeholder","First Name",1,"form-control",3,"ngClass"],[1,"md-col-6","form-group","ml-3"],["type","text","formControlName","lastName","placeholder","Last Name",1,"form-control",3,"ngClass"],["type","text","formControlName","username","placeholder","User Name",1,"form-control",3,"ngClass"],["type","password","formControlName","password","placeholder","Password",1,"form-control",3,"ngClass"],["formControlName","confirm_password","id","confirm_password","placeholder","Confirm Password","type","password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","admin",1,"form-check-label"],["type","checkbox","formControlName","admin","id","admin",1,"form-check-input"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"alert","alert-danger"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,r){1&e&&(o.Tb(0,"div",0),o.Fc(1,h,2,0,"h1",1),o.Fc(2,g,2,0,"h1",1),o.Tb(3,"form",2),o.fc("ngSubmit",(function(){return r.onSubmit()})),o.Tb(4,"div",3),o.Pb(5,"input",4),o.Fc(6,T,3,2,"div",5),o.Sb(),o.Tb(7,"div",6),o.Tb(8,"div",7),o.Pb(9,"input",8),o.Fc(10,w,2,1,"div",5),o.Sb(),o.Tb(11,"div",9),o.Pb(12,"input",10),o.Fc(13,N,2,1,"div",5),o.Sb(),o.Sb(),o.Tb(14,"div",3),o.Pb(15,"input",11),o.Fc(16,H,2,1,"div",5),o.Sb(),o.Tb(17,"div",3),o.Pb(18,"input",12),o.Fc(19,P,3,2,"div",5),o.Sb(),o.Tb(20,"div",3),o.Pb(21,"input",13),o.Fc(22,O,3,2,"div",14),o.Sb(),o.Tb(23,"div",3),o.Tb(24,"label",15),o.Pb(25,"input",16),o.Hc(26," Is Admin? "),o.Sb(),o.Sb(),o.Tb(27,"div",3),o.Tb(28,"button",17),o.Fc(29,j,1,0,"span",18),o.Hc(30," Save "),o.Sb(),o.Tb(31,"a",19),o.Hc(32,"Cancel"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(1),o.oc("ngIf",r.isAddMode),o.Bb(1),o.oc("ngIf",!r.isAddMode),o.Bb(1),o.oc("formGroup",r.form),o.Bb(2),o.oc("ngClass",o.sc(16,U,r.submitted&&r.f.email.errors)),o.Bb(1),o.oc("ngIf",r.submitted&&r.f.email.errors),o.Bb(3),o.oc("ngClass",o.sc(18,U,r.submitted&&r.f.firstName.errors)),o.Bb(1),o.oc("ngIf",r.submitted&&r.f.firstName.errors),o.Bb(2),o.oc("ngClass",o.sc(20,U,r.submitted&&r.f.lastName.errors)),o.Bb(1),o.oc("ngIf",r.submitted&&r.f.lastName.errors),o.Bb(2),o.oc("ngClass",o.sc(22,U,r.submitted&&r.f.username.errors)),o.Bb(1),o.oc("ngIf",r.submitted&&r.f.username.errors),o.Bb(2),o.oc("ngClass",o.sc(24,U,r.submitted&&r.f.password.errors)),o.Bb(1),o.oc("ngIf",r.submitted&&r.f.password.errors),o.Bb(3),o.oc("ngIf",r.f.confirm_password.touched&&r.f.confirm_password.invalid),o.Bb(6),o.oc("disabled",r.loading),o.Bb(1),o.oc("ngIf",r.loading))},directives:[i.k,s.r,s.j,s.e,s.b,s.i,s.d,i.i,s.a,n.e],encapsulation:2}),e})();const L=[{path:"",component:c,children:[{path:"",component:m},{path:"add",component:A},{path:"edit/:id",component:A}]}];let M=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(r){return new(r||e)},imports:[[n.f.forChild(L)],n.f]}),e})(),D=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(r){return new(r||e)},imports:[[i.b,s.n,M]]}),e})()}}]);